#!/bin/sh

# Compile a Curry program with idcompiler and ghc
SYSDIR=`dirname "$0"`
PROG=$1
PROG=`expr $PROG : '\(.*\)\.lcurry' \| $PROG`
PROG=`expr $PROG : '\(.*\)\.curry' \| $PROG`

$SYSDIR/idc $1
echo "module Main where" > Main.hs
echo "import Curry_$PROG" >> Main.hs
echo "main = print c_C_main" >> Main.hs
ghc -O2 --make -fforce-recomp -i$SYSDIR Main.hs
